!function(e){"use strict";e.ThreeSixty=function(t,a){var r,n=this,i=[];n.$el=e(t),n.el=t,n.$el.data("ThreeSixty",n),n.init=function(){r=e.extend({},e.ThreeSixty.defaultOptions,a),r.parallel||n.loadImages(),r.disableSpin&&(r.currentFrame=1,r.endFrame=2),n.initProgress()},n.initProgress=function(){n.$el.css({width:r.width+"px",height:r.height+"px"}).css(r.styles),n.$el.find(r.progress).css({marginTop:r.height/2-15+"px"}),n.$el.find(r.progress).fadeIn("slow"),n.$el.find(r.imgList).hide()},n.loadImages=function(){var t,a,o;t=document.createElement("li"),a=r.domain+r.imagePath+r.filePrefix+(r.loadedImages+1)+r.ext+(e.browser.msie?"?"+(new Date).getTime():""),o=e("<img>").attr("src",a).addClass("previous-image").appendTo(t),i.push(o),n.$el.find(r.imgList).append(t),e(o).load(function(){n.imageLoaded()})},n.imageLoaded=function(){r.loadedImages+=1,e(r.progress+" span").text(Math.floor(100*(r.loadedImages/r.totalFrames))+"%"),r.loadedImages>=r.totalFrames?(i[0].removeClass("previous-image").addClass("current-image"),e(r.progress).fadeOut("slow",function(){e(this).hide(),n.showImages(),n.showNavigation()})):n.loadImages()},n.showImages=function(){n.$el.css("background-image","none"),n.$el.find(".txtC").fadeIn(),n.$el.find(r.imgList).fadeIn(),r.ready=!0,n.initEvents(),n.refresh()},n.showNavigation=function(){if(r.navigation&&!r.navigation_init){var t,a,i,o;t=e("<div/>").attr("class","nav_bar"),a=e("<a/>").attr({href:"#","class":"nav_bar_next"}).html("next"),i=e("<a/>").attr({href:"#","class":"nav_bar_previous"}).html("previous"),o=e("<a/>").attr({href:"#","class":"nav_bar_play"}).html("play"),t.append(i),t.append(o),t.append(a),n.$el.prepend(t),a.bind("mousedown touchstart",n.next),i.bind("mousedown touchstart",n.previous),o.bind("mousedown touchstart",n.play_stop),r.navigation_init=!0}},n.play_stop=function(t){t.preventDefault(),r.autoplay?(r.autoplay=!1,e(t.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(r.play),r.play=null):(r.autoplay=!0,r.play=setInterval(n.moveToNextFrame,40),e(t.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"))},n.next=function(e){e&&e.preventDefault(),r.endFrame-=5,n.refresh()},n.previous=function(e){e&&e.preventDefault(),r.endFrame+=1,n.refresh()},n.play=function(){r.autoplay||(r.autoplay=!0,r.play=setInterval(n.moveToNextFrame,40))},n.stop=function(){r.autoplay&&(r.autoplay=!1,clearInterval(r.play),r.play=null)},n.moveToNextFrame=function(){1===r.autoplayDirection?r.endFrame-=1:r.endFrame+=1,n.refresh()},n.initEvents=function(){n.$el.bind("mousedown touchstart touchmove touchend mousemove click",function(t){t.preventDefault(),"mousedown"===t.type&&1===t.which||"touchstart"===t.type?(r.pointerStartPosX=n.getPointerEvent(t).pageX,r.dragging=!0):"touchmove"===t.type?n.trackPointer(t):"touchend"===t.type&&(r.dragging=!1),"click"!==t.type||e.browser.msie||n.$el.css("cursor","url(assets/images/hand_closed.png), auto")}),e(document).bind("mouseup",function(){r.dragging=!1,e(this).css("cursor","none")}),e(document).bind("mousemove",function(t){r.dragging?(t.preventDefault(),e.browser.msie||n.$el.css("cursor","url(assets/images/hand_closed.png), auto")):e.browser.msie||n.$el.css("cursor","url(assets/images/hand_open.png), auto"),n.trackPointer(t)})},n.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},n.trackPointer=function(e){r.ready&&r.dragging&&(r.pointerEndPosX=n.getPointerEvent(e).pageX,r.monitorStartTime<(new Date).getTime()-r.monitorInt&&(r.pointerDistance=r.pointerEndPosX-r.pointerStartPosX,r.endFrame=r.currentFrame+Math.ceil((r.totalFrames-1)*r.speedMultiplier*(r.pointerDistance/n.$el.width())),n.refresh(),r.monitorStartTime=(new Date).getTime(),r.pointerStartPosX=n.getPointerEvent(e).pageX))},n.refresh=function(){0===r.ticker&&(r.ticker=setInterval(n.render,Math.round(1e3/r.framerate)))},n.render=function(){var e;r.currentFrame!==r.endFrame?(e=r.endFrame<r.currentFrame?Math.floor(.1*(r.endFrame-r.currentFrame)):Math.ceil(.1*(r.endFrame-r.currentFrame)),n.hidePreviousFrame(),r.currentFrame+=e,n.showCurrentFrame()):(window.clearInterval(r.ticker),r.ticker=0)},n.hidePreviousFrame=function(){i[n.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image")},n.showCurrentFrame=function(){i[n.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image")},n.getNormalizedCurrentFrame=function(){var e=Math.ceil(r.currentFrame%r.totalFrames);return 0>e&&(e+=r.totalFrames-1),e},n.init()},e.ThreeSixty.defaultOptions={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1},e.fn.ThreeSixty=function(t){return Object.create(new e.ThreeSixty(this,t))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t});